# 🏛️ 0xXOC: P2P Token Marketplace

> 🏆 **Base Batch LatAm Hackathon Project** - Stablecoins Track (DeFi P2P Exchange)
> 
> GitHub: [https://github.com/0xOucan/0xXOC-AIP2PMXNExchange](https://github.com/0xOucan/0xXOC-AIP2PMXNExchange)

## 📑 Table of Contents
- [Overview](#-overview)
- [Features](#-features)
- [Getting Started](#-getting-started)
- [Backend Integration](#-backend-integration)
- [Project Structure](#-project-structure)
- [Key Components](#-key-components)
- [Running the Complete Stack](#-running-the-complete-stack)
- [Security Considerations](#-security-considerations)
- [Marketplace Features](#-marketplace-features)
- [Contributing](#-contributing)
- [Related Projects](#-related-projects)
- [Contact](#-contact)

## 🌟 Overview

0xXOC is a P2P marketplace designed to bridge the gap between cryptocurrency and Mexican Pesos through OXXO Spin QR codes. Our platform enables users to buy and sell digital assets using Mexico's most accessible payment method, making cryptocurrency accessible to everyone in Mexico.

Built for the Base Batch LatAm hackathon, 0xXOC focuses on stablecoin integration, particularly USDC, MXNe, and XOC. The platform is especially valuable for remittances, allowing people in the US to send money to relatives in Mexico by selling stablecoins for MXN that can be redeemed via OXXO Spin.

The 0xXOC platform handles the entire trading process with a secure escrow system, protecting both buyers and sellers while ensuring seamless transactions. All data is encrypted and stored on-chain, with transactions verified and protected by the Coinbase AgentKit AI agent on the Base network.

## ✨ Features

- 🛒 Create and browse buying/selling orders for cryptocurrency
- 💸 Seamless integration with OXXO Spin QR codes for fiat payments
- 🏦 Support for multiple stablecoins: MXNe, USDC, XOC, and ETH
- 👛 External wallet support with secure transaction handling
- 🔐 Secure escrow system for protected trades
- 🔄 Real-time transaction monitoring and status tracking
- 💰 Wallet balance tracking with USD conversion
- 🌓 Light/Dark theme toggle with system preference detection
- 📱 Responsive design for desktop and mobile devices
- 🔒 Enhanced security with browser extension wallet integration

## 🚀 Getting Started

### Prerequisites

- Node.js v16+ and npm v7+
- 0xXOC backend API running and accessible
- Web browser with JavaScript enabled
- Browser extension wallet (MetaMask, Rabby, etc.) for blockchain transactions

### Installation

```bash
# Clone the repository
git clone https://github.com/0xOucan/0xXOC-AIP2PMXNExchange.git
cd 0xXOC-AIP2PMXNExchange

# Use the launch script to start both services
chmod +x launch.sh
./launch.sh
```

The launch script automatically:
1. Installs dependencies for both repositories
2. Starts the backend API server
3. Starts the frontend development server
4. Connects them together with proper configuration

### Configuration

The application requires the following environment variables:

```
# API endpoint for the 0xXOC backend
VITE_API_URL=http://localhost:4000

# Explorer URL for transaction links
VITE_BASE_EXPLORER_URL=https://basescan.org

# Privy App ID for wallet integration
VITE_PRIVY_APP_ID=your_privy_app_id

# Escrow wallet address for monitoring
VITE_ESCROW_WALLET_ADDRESS=0x9c77c6fafc1eb0821F1De12972Ef0199C97C6e45
```

## 🔌 Backend Integration

This web interface connects to the 0xXOC backend API to process marketplace orders and execute blockchain operations. The backend leverages Coinbase AgentKit for AI-powered transaction verification.

### Communication Flow

1. **User Interface**: The web frontend collects user inputs for creating or filling orders
2. **API Requests**: Frontend sends order data and OXXO QR codes to appropriate endpoints
3. **Order Processing**: Backend processes orders and manages the escrow system
4. **Blockchain Operations**: Backend creates transaction requests for the frontend wallet to sign
5. **Transaction Handling**: Frontend monitors and processes pending transactions with the connected wallet
6. **Response Handling**: Frontend displays results and updates wallet balances

### Wallet Integration

0xXOC supports external wallets through the Privy integration:

- **Wallet Connection**: Connect any EIP-1193 compatible wallet (MetaMask, Rabby, etc.)
- **Transaction Signing**: Transactions generated by the backend are sent to your wallet for signing
- **Transaction Monitoring**: Monitor transaction status in real-time through the UI
- **Wallet Balances**: View your wallet's token balances and total portfolio value
- **Network Switching**: Automatic network detection and switching
- **Security**: No private keys stored in the application or backend

## 📂 Project Structure

```
0xXOC-Frontend/
├── src/
│   ├── components/           # React UI components
│   │   ├── Header.tsx        # Application header
│   │   ├── Icons.tsx         # SVG icon components
│   │   ├── InfoPanel.tsx     # Welcome/information panel
│   │   ├── WalletBalances.tsx # Wallet balance display
│   │   ├── WalletConnect.tsx  # Wallet connection component
│   │   ├── MainLayout.tsx    # Layout wrapper with dark mode support
│   │   ├── OrderCard.tsx     # Order display component
│   │   ├── CreateOrderForm.tsx # Form for creating new orders
│   │   ├── QrCodeUploader.tsx # QR code upload and processing
│   │   └── TransactionMonitor.tsx # Transaction monitoring UI
│   ├── providers/
│   │   ├── PrivyProvider.tsx  # Privy wallet provider integration
│   │   └── WalletContext.tsx  # Wallet state management
│   ├── services/
│   │   ├── marketplaceService.ts # Marketplace API communication
│   │   ├── blockchainService.ts # Blockchain connection services
│   │   └── transactionService.ts # Transaction handling and processing
│   ├── App.tsx               # Main application component
│   ├── config.ts             # Application configuration
│   ├── index.css             # Global CSS
│   └── main.tsx              # Application entry point
├── index.html                # HTML template
├── package.json              # Project dependencies and scripts
├── postcss.config.js         # PostCSS configuration
├── tailwind.config.js        # Tailwind CSS configuration
├── tsconfig.json             # TypeScript configuration
└── vite.config.ts            # Vite bundler configuration
```

## 🧩 Key Components

### 1. WalletContext
The central wallet management system provides:
- Wallet connection state management
- Backend synchronization
- Address tracking and formatting
- Integration with Privy authentication

### 2. TransactionMonitor
Monitors and processes transactions by:
- Polling for pending transactions
- Creating wallet clients for signing
- Network validation and switching
- Transaction status tracking
- Error handling with helpful messages

### 3. WalletBalances
Real-time balance tracking with:
- Direct blockchain data fetching with viem
- USD conversion with market prices
- Visual indicators for token types
- One-click refresh functionality
- Blockchain explorer integration for verification

### 4. OrderManagement
Marketplace order functionality:
- Create buying and selling orders
- Browse available marketplace orders
- Fill orders with OXXO QR codes or tokens
- Monitor order status and history
- Cancel your own orders

### 5. QrCodeHandler
Processes OXXO Spin QR codes:
- Secure upload and parsing of QR code data
- QR code image encryption and storage
- QR code decryption for verified buyers
- Validation of QR code data and expiration
- Status tracking for QR code redemption

## 🌐 Running the Complete Stack

For the best experience, run both the frontend and backend together:

```bash
# Start both servers using the launch script
./launch.sh
```

This will start:
- Backend API server at http://localhost:4000
- Frontend development server at http://localhost:5173

## 🔐 Security Considerations

The 0xXOC web interface implements several security best practices:

- **No Private Key Storage**: Private keys never leave your wallet - all transactions require explicit approval
- **Secure Wallet Connections**: Implemented via Privy integration with industry-standard security
- **QR Code Encryption**: OXXO Spin QR codes are encrypted end-to-end for maximum security
- **Transaction Verification**: All transactions include clear information about what you're approving
- **Network Validation**: Automatic verification of the correct network before transactions
- **Session-Based Authentication**: Wallet connections persist only for the current session
- **Transaction Monitoring**: Complete visibility into all pending and processed transactions
- **Error Handling**: Comprehensive error handling prevents security issues from failed operations
- **Data Validation**: All inputs are validated before processing to prevent injection attacks
- **Rate Limiting**: API endpoints implement rate limiting to prevent abuse

## 🛒 Marketplace Features

0xXOC implements a comprehensive P2P marketplace system:

### Supported Tokens

| Token | Symbol | Contract Address | Description |
|-------|--------|-----------------|-------------|
| USDC | 💵 | 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913 | USD Coin on Base network |
| MXNe | 🪙 | 0x269caE7Dc59803e5C596c95756faEeBb6030E0aF | Mexican Peso stablecoin backed by tokenized CETES |
| XOC | 🍫 | 0xa411c9Aa00E020e4f88Bc19996d29c5B7ADB4ACf | Base chain Mexican Peso paired CDP stable coin |
| ETH | 💎 | Native token | Native Base chain Ethereum |

### Order Types

1. **Buying Orders**:
   - User provides an OXXO Spin QR code with MXN amount
   - Specifies which token and amount they want to buy
   - QR code is encrypted and stored securely
   - Sellers can fill the order by transferring tokens

2. **Selling Orders**:
   - User escrows tokens they want to sell
   - Specifies the MXN amount they want to receive
   - Buyers can fill the order with an OXXO Spin QR code
   - Once verified, tokens are released to the buyer

### Escrow System

The 0xXOC marketplace uses a secure escrow system to protect all trades:
- Tokens are held in escrow during the trading process
- Escrow is controlled by smart contracts and verified by Coinbase AgentKit
- All transactions are recorded on-chain for full transparency
- Escrow is only released when all conditions are met

## 👨‍💻 Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## 🔗 Related Projects

- [0xXOC Backend](https://github.com/0xOucan/0xXOC-AIP2PMXNExchange/0xXOC-Backend) - Backend API for the P2P marketplace

## 📧 Contact

- Twitter: [@0xoucan](https://x.com/0xoucan)

## 📄 License

This project is licensed under the MIT License.
